syntax = "proto3";

option go_package = "event";

option (gogoproto.testgen_all)  = true;
option (gogoproto.benchgen_all) = true;
option (gogoproto.populate_all) = true;

import "github.com/gogo/protobuf/gogoproto/gogo.proto";
import "github.com/elojah/game_01/pkg/geometry/position.proto";
import "github.com/elojah/game_01/pkg/ability/targets.proto";

message MoveSource {
	repeated bytes Targets     = 1 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
	Position Position          = 2 [(gogoproto.nullable)   = false];
}

message MoveTarget {
	bytes Source               = 1 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
	Position Position          = 2 [(gogoproto.nullable)   = false];
}

message CastSource {
	bytes AbilityID            = 1 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
	repeated Targets Targets   = 2 [(gogoproto.nullable)   = false];
}

message FeedbackTarget {
	bytes ID                   = 1 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
	bytes Source               = 2 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
}

message PerformSource {
	bytes AbilityID            = 1 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
	repeated Targets Targets   = 2 [(gogoproto.nullable)   = false];
}

message PerformTarget {
	bytes AbilityID            = 1 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
	bytes ComponentID          = 2 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
	bytes Source               = 3 [(gogoproto.customtype) = "github.com/elojah/game_01/pkg/ulid.ID", (gogoproto.nullable) = false];
}

message Action {
	option (gogoproto.onlyone)    = true;
	MoveSource MoveSource         = 1;
	MoveTarget MoveTarget         = 2;
	CastSource CastSource         = 3;
	PerformSource PerformSource   = 4;
	PerformTarget PerformTarget   = 5;
	FeedbackTarget FeedbackTarget = 6;
}
